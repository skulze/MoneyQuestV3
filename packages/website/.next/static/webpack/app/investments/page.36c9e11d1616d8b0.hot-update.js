"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/investments/page",{

/***/ "(app-pages-browser)/./hooks/useSubscription.ts":
/*!**********************************!*\
  !*** ./hooks/useSubscription.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSubscription: () => (/* binding */ useSubscription)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/react */ \"(app-pages-browser)/../../node_modules/next-auth/react/index.js\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Import types and utilities without initializing Stripe\nconst SUBSCRIPTION_TIERS = {\n    FREE: {\n        name: 'Free',\n        price: 0,\n        features: [\n            'Manual transaction entry',\n            'Basic budgeting',\n            'Local data storage',\n            'PDF/Excel reports',\n            'Up to 3 accounts'\n        ],\n        limits: {\n            users: 1,\n            accounts: 3,\n            transactions: 1000,\n            budgets: 5,\n            categories: 20\n        }\n    },\n    PLUS: {\n        name: 'Plus',\n        price: 2.99,\n        features: [\n            'Everything in Free',\n            'Multi-user collaboration',\n            'OCR receipt processing',\n            'Enhanced analytics',\n            'Up to 5 accounts',\n            'Priority support'\n        ],\n        limits: {\n            users: 5,\n            accounts: 5,\n            transactions: 10000,\n            budgets: 20,\n            categories: 50\n        }\n    },\n    PREMIUM: {\n        name: 'Premium',\n        price: 9.99,\n        features: [\n            'Everything in Plus',\n            'Bank account connections',\n            'Automatic transaction import',\n            'Investment account sync',\n            'Advanced automation',\n            'Tax optimization',\n            'Unlimited accounts'\n        ],\n        limits: {\n            users: 10,\n            accounts: 999,\n            transactions: 999999,\n            budgets: 999,\n            categories: 999\n        }\n    }\n};\nconst canAccessFeature = (currentTier, requiredTier)=>{\n    const tierOrder = [\n        'FREE',\n        'PLUS',\n        'PREMIUM'\n    ];\n    const currentIndex = tierOrder.indexOf(currentTier);\n    const requiredIndex = tierOrder.indexOf(requiredTier);\n    return currentIndex >= requiredIndex;\n};\nconst checkUsageLimit = (tier, resource, currentCount)=>{\n    const tierConfig = SUBSCRIPTION_TIERS[tier];\n    if (!tierConfig) return false;\n    const limit = tierConfig.limits[resource];\n    return currentCount < limit;\n};\nconst getUpgradeMessage = (currentTier, requiredTier)=>{\n    if (requiredTier === 'PLUS') {\n        return 'Upgrade to Plus ($2.99/month) to access this feature';\n    }\n    if (requiredTier === 'PREMIUM') {\n        return 'Upgrade to Premium ($9.99/month) to access this feature';\n    }\n    return 'Please upgrade to access this feature';\n};\nconst FEATURE_TIER_MAP = {\n    multiUser: 'PLUS',\n    ocrReceipts: 'PLUS',\n    prioritySync: 'PLUS',\n    enhancedInvestments: 'PLUS',\n    bankConnections: 'PREMIUM',\n    investmentSync: 'PREMIUM'\n};\nfunction useSubscription() {\n    var _session_user;\n    const { data: session } = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.useSession)();\n    const [subscription, setSubscription] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const fetchSubscriptionStatus = async ()=>{\n        var _session_user;\n        if (!(session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.email)) {\n            // Default to free tier for unauthenticated users\n            setSubscription({\n                tier: 'FREE',\n                tierName: 'Free',\n                price: 0,\n                features: SUBSCRIPTION_TIERS.FREE.features,\n                limits: SUBSCRIPTION_TIERS.FREE.limits,\n                isActive: true\n            });\n            setIsLoading(false);\n            return;\n        }\n        try {\n            setError(null);\n            const response = await fetch('/api/subscriptions/status');\n            if (!response.ok) {\n                throw new Error(\"HTTP error! status: \".concat(response.status));\n            }\n            const data = await response.json();\n            setSubscription(data);\n        } catch (err) {\n            console.error('Failed to fetch subscription status:', err);\n            setError('Failed to load subscription status');\n            // Fallback to free tier\n            setSubscription({\n                tier: 'FREE',\n                tierName: 'Free',\n                price: 0,\n                features: SUBSCRIPTION_TIERS.FREE.features,\n                limits: SUBSCRIPTION_TIERS.FREE.limits,\n                isActive: true\n            });\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSubscription.useEffect\": ()=>{\n            fetchSubscriptionStatus();\n        }\n    }[\"useSubscription.useEffect\"], [\n        session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.email\n    ]);\n    const canAccess = (requiredTier)=>{\n        if (!subscription) return false;\n        return canAccessFeature(subscription.tier, requiredTier);\n    };\n    const canUseFeature = (feature)=>{\n        const requiredTier = FEATURE_TIER_MAP[feature];\n        return canAccess(requiredTier);\n    };\n    const canAddResource = (resource, currentCount)=>{\n        if (!subscription) return false;\n        return checkUsageLimit(subscription.tier, resource, currentCount);\n    };\n    const getResourceLimit = (resource)=>{\n        if (!subscription) return SUBSCRIPTION_TIERS.FREE.limits[resource];\n        return subscription.limits[resource];\n    };\n    const needsUpgrade = (requiredTier)=>{\n        return !canAccess(requiredTier);\n    };\n    const getUpgradeMessageForTier = (requiredTier)=>{\n        if (!subscription) return 'Please sign in to access this feature';\n        return getUpgradeMessage(subscription.tier, requiredTier);\n    };\n    const upgrade = async (tier)=>{\n        try {\n            const response = await fetch('/api/subscriptions/create-checkout', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    tier\n                })\n            });\n            if (response.ok) {\n                const { checkoutUrl } = await response.json();\n                window.location.href = checkoutUrl;\n            } else {\n                // Handle demo mode gracefully\n                try {\n                    const errorData = await response.json();\n                    if (errorData.isDemoMode) {\n                        console.log('Demo mode: Simulating upgrade to', tier);\n                        // Show notification about what would normally happen\n                        const confirmed = window.confirm(\"\\uD83D\\uDED2 Demo Mode Simulation\\n\\n\" + \"In a real environment, this would:\\n\" + \"• Redirect you to Stripe checkout\\n\" + \"• Process payment for \".concat(tier, \" ($\").concat(SUBSCRIPTION_TIERS[tier].price, \"/month)\\n\") + \"• Update your subscription\\n\\n\" + \"For this demo, we'll simulate the upgrade locally.\\n\\n\" + \"Proceed with demo upgrade to \".concat(tier, \"?\"));\n                        if (confirmed) {\n                            // Simulate the tier upgrade locally\n                            setSubscription({\n                                tier: tier,\n                                tierName: SUBSCRIPTION_TIERS[tier].name,\n                                price: SUBSCRIPTION_TIERS[tier].price,\n                                features: SUBSCRIPTION_TIERS[tier].features,\n                                limits: SUBSCRIPTION_TIERS[tier].limits,\n                                isActive: true\n                            });\n                            // Show success message\n                            alert(\"✅ Demo upgrade successful!\\n\\nYou are now on the \".concat(tier, \" plan ($\").concat(SUBSCRIPTION_TIERS[tier].price, \"/month).\\n\\nThis is a local simulation - no actual billing occurred.\"));\n                            return; // Success, don't throw error\n                        } else {\n                            throw new Error('Upgrade cancelled by user');\n                        }\n                    } else {\n                        throw new Error(errorData.error || 'Failed to create checkout session');\n                    }\n                } catch (parseError) {\n                    throw new Error(\"Demo Mode: Stripe not configured. Would upgrade to \".concat(tier, \" ($\").concat(SUBSCRIPTION_TIERS[tier].price, \"/month)\"));\n                }\n            }\n        } catch (err) {\n            console.error('Error starting upgrade:', err);\n            throw err;\n        }\n    };\n    const manageBilling = async ()=>{\n        try {\n            const response = await fetch('/api/subscriptions/create-portal', {\n                method: 'POST'\n            });\n            if (response.ok) {\n                const { portalUrl } = await response.json();\n                window.location.href = portalUrl;\n            } else {\n                // Handle demo mode gracefully\n                console.log('Demo mode: Billing management requested');\n                // Show demo billing management options\n                const options = \"Demo Billing Management\\n\\nAvailable options:\\n• Downgrade to Free (cancel subscription)\\n• View current plan details\\n• Simulate plan changes\";\n                if ((subscription === null || subscription === void 0 ? void 0 : subscription.tier) !== 'FREE') {\n                    const confirmed = window.confirm(\"\".concat(options, \"\\n\\nWould you like to downgrade to the Free plan?\\n\\n(This simulates canceling your subscription)\"));\n                    if (confirmed) {\n                        // Simulate downgrade to free\n                        setSubscription({\n                            tier: 'FREE',\n                            tierName: SUBSCRIPTION_TIERS.FREE.name,\n                            price: SUBSCRIPTION_TIERS.FREE.price,\n                            features: SUBSCRIPTION_TIERS.FREE.features,\n                            limits: SUBSCRIPTION_TIERS.FREE.limits,\n                            isActive: true\n                        });\n                        alert(\"✅ Demo downgrade successful!\\n\\nYou are now on the Free plan.\\n\\nThis is a local simulation - no actual billing changes occurred.\");\n                        return; // Success, don't throw error\n                    }\n                } else {\n                    alert('Demo Mode: You are already on the Free plan.\\n\\nIn a real environment, this would open the Stripe billing portal.');\n                }\n                throw new Error('Demo Mode: Billing portal simulation completed');\n            }\n        } catch (err) {\n            console.error('Error opening billing portal:', err);\n            throw err;\n        }\n    };\n    const refresh = async ()=>{\n        setIsLoading(true);\n        await fetchSubscriptionStatus();\n    };\n    return {\n        subscription,\n        isLoading,\n        error,\n        canAccess,\n        canUseFeature,\n        canAddResource,\n        getResourceLimit,\n        getUpgradeMessage: getUpgradeMessageForTier,\n        needsUpgrade,\n        refresh,\n        upgrade,\n        manageBilling\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZVN1YnNjcmlwdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE0QztBQUNDO0FBRTdDLHlEQUF5RDtBQUN6RCxNQUFNRyxxQkFBcUI7SUFDekJDLE1BQU07UUFDSkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsUUFBUTtZQUNOQyxPQUFPO1lBQ1BDLFVBQVU7WUFDVkMsY0FBYztZQUNkQyxTQUFTO1lBQ1RDLFlBQVk7UUFDZDtJQUNGO0lBQ0FDLE1BQU07UUFDSlQsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxRQUFRO1lBQ05DLE9BQU87WUFDUEMsVUFBVTtZQUNWQyxjQUFjO1lBQ2RDLFNBQVM7WUFDVEMsWUFBWTtRQUNkO0lBQ0Y7SUFDQUUsU0FBUztRQUNQVixNQUFNO1FBQ05DLE9BQU87UUFDUEMsVUFBVTtZQUNSO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsUUFBUTtZQUNOQyxPQUFPO1lBQ1BDLFVBQVU7WUFDVkMsY0FBYztZQUNkQyxTQUFTO1lBQ1RDLFlBQVk7UUFDZDtJQUNGO0FBQ0Y7QUFFQSxNQUFNRyxtQkFBbUIsQ0FBQ0MsYUFBcUJDO0lBQzdDLE1BQU1DLFlBQVk7UUFBQztRQUFRO1FBQVE7S0FBVTtJQUM3QyxNQUFNQyxlQUFlRCxVQUFVRSxPQUFPLENBQUNKO0lBQ3ZDLE1BQU1LLGdCQUFnQkgsVUFBVUUsT0FBTyxDQUFDSDtJQUN4QyxPQUFPRSxnQkFBZ0JFO0FBQ3pCO0FBRUEsTUFBTUMsa0JBQWtCLENBQUNDLE1BQWNDLFVBQWtCQztJQUN2RCxNQUFNQyxhQUFheEIsa0JBQWtCLENBQUNxQixLQUF3QztJQUM5RSxJQUFJLENBQUNHLFlBQVksT0FBTztJQUN4QixNQUFNQyxRQUFRRCxXQUFXbkIsTUFB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QWdCOzRCQUNkakIsTUFBTTs0QkFDTnlCLFVBQVU5QyxtQkFBbUJDLElBQUksQ0FBQ0MsSUFBSTs0QkFDdENDLE9BQU9ILG1CQUFtQkMsSUFBSSxDQUFDRSxLQUFLOzRCQUNwQ0MsVUFBVUosbUJBQW1CQyxJQUFJLENBQUNHLFFBQVE7NEJBQzFDQyxRQUFRTCxtQkFBbUJDLElBQUksQ0FBQ0ksTUFBTTs0QkFDdEMwQyxVQUFVO3dCQUNaO3dCQUVBK0IsTUFBTzt3QkFDUCxRQUFRLDZCQUE2QjtvQkFDdkM7Z0JBQ0YsT0FBTztvQkFDTEEsTUFBTTtnQkFDUjtnQkFFQSxNQUFNLElBQUkzQixNQUFNO1lBQ2xCO1FBQ0YsRUFBRSxPQUFPRyxLQUFLO1lBQ1pDLFFBQVFkLEtBQUssQ0FBQyxpQ0FBaUNhO1lBQy9DLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQU02QixVQUFVO1FBQ2QzQyxhQUFhO1FBQ2IsTUFBTUc7SUFDUjtJQUVBLE9BQU87UUFDTE47UUFDQUU7UUFDQUU7UUFDQWU7UUFDQUM7UUFDQUU7UUFDQUM7UUFDQWxDLG1CQUFtQm9DO1FBQ25CRDtRQUNBc0I7UUFDQXBCO1FBQ0FpQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbmF0aGFcXE9uZURyaXZlXFxEZXNrdG9wXFxNb25leVF1ZXN0VjNcXHBhY2thZ2VzXFx3ZWJzaXRlXFxob29rc1xcdXNlU3Vic2NyaXB0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL3JlYWN0JztcblxuLy8gSW1wb3J0IHR5cGVzIGFuZCB1dGlsaXRpZXMgd2l0aG91dCBpbml0aWFsaXppbmcgU3RyaXBlXG5jb25zdCBTVUJTQ1JJUFRJT05fVElFUlMgPSB7XG4gIEZSRUU6IHtcbiAgICBuYW1lOiAnRnJlZScsXG4gICAgcHJpY2U6IDAsXG4gICAgZmVhdHVyZXM6IFtcbiAgICAgICdNYW51YWwgdHJhbnNhY3Rpb24gZW50cnknLFxuICAgICAgJ0Jhc2ljIGJ1ZGdldGluZycsXG4gICAgICAnTG9jYWwgZGF0YSBzdG9yYWdlJyxcbiAgICAgICdQREYvRXhjZWwgcmVwb3J0cycsXG4gICAgICAnVXAgdG8gMyBhY2NvdW50cydcbiAgICBdLFxuICAgIGxpbWl0czoge1xuICAgICAgdXNlcnM6IDEsXG4gICAgICBhY2NvdW50czogMyxcbiAgICAgIHRyYW5zYWN0aW9uczogMTAwMCxcbiAgICAgIGJ1ZGdldHM6IDUsXG4gICAgICBjYXRlZ29yaWVzOiAyMFxuICAgIH1cbiAgfSxcbiAgUExVUzoge1xuICAgIG5hbWU6ICdQbHVzJyxcbiAgICBwcmljZTogMi45OSxcbiAgICBmZWF0dXJlczogW1xuICAgICAgJ0V2ZXJ5dGhpbmcgaW4gRnJlZScsXG4gICAgICAnTXVsdGktdXNlciBjb2xsYWJvcmF0aW9uJyxcbiAgICAgICdPQ1IgcmVjZWlwdCBwcm9jZXNzaW5nJyxcbiAgICAgICdFbmhhbmNlZCBhbmFseXRpY3MnLFxuICAgICAgJ1VwIHRvIDUgYWNjb3VudHMnLFxuICAgICAgJ1ByaW9yaXR5IHN1cHBvcnQnXG4gICAgXSxcbiAgICBsaW1pdHM6IHtcbiAgICAgIHVzZXJzOiA1LFxuICAgICAgYWNjb3VudHM6IDUsXG4gICAgICB0cmFuc2FjdGlvbnM6IDEwMDAwLFxuICAgICAgYnVkZ2V0czogMjAsXG4gICAgICBjYXRlZ29yaWVzOiA1MFxuICAgIH1cbiAgfSxcbiAgUFJFTUlVTToge1xuICAgIG5hbWU6ICdQcmVtaXVtJyxcbiAgICBwcmljZTogOS45OSxcbiAgICBmZWF0dXJlczogW1xuICAgICAgJ0V2ZXJ5dGhpbmcgaW4gUGx1cycsXG4gICAgICAnQmFuayBhY2NvdW50IGNvbm5lY3Rpb25zJyxcbiAgICAgICdBdXRvbWF0aWMgdHJhbnNhY3Rpb24gaW1wb3J0JyxcbiAgICAgICdJbnZlc3RtZW50IGFjY291bnQgc3luYycsXG4gICAgICAnQWR2YW5jZWQgYXV0b21hdGlvbicsXG4gICAgICAnVGF4IG9wdGltaXphdGlvbicsXG4gICAgICAnVW5saW1pdGVkIGFjY291bnRzJ1xuICAgIF0sXG4gICAgbGltaXRzOiB7XG4gICAgICB1c2VyczogMTAsXG4gICAgICBhY2NvdW50czogOTk5LFxuICAgICAgdHJhbnNhY3Rpb25zOiA5OTk5OTksXG4gICAgICBidWRnZXRzOiA5OTksXG4gICAgICBjYXRlZ29yaWVzOiA5OTlcbiAgICB9XG4gIH1cbn0gYXMgY29uc3Q7XG5cbmNvbnN0IGNhbkFjY2Vzc0ZlYXR1cmUgPSAoY3VycmVudFRpZXI6IHN0cmluZywgcmVxdWlyZWRUaWVyOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgdGllck9yZGVyID0gWydGUkVFJywgJ1BMVVMnLCAnUFJFTUlVTSddO1xuICBjb25zdCBjdXJyZW50SW5kZXggPSB0aWVyT3JkZXIuaW5kZXhPZihjdXJyZW50VGllcik7XG4gIGNvbnN0IHJlcXVpcmVkSW5kZXggPSB0aWVyT3JkZXIuaW5kZXhPZihyZXF1aXJlZFRpZXIpO1xuICByZXR1cm4gY3VycmVudEluZGV4ID49IHJlcXVpcmVkSW5kZXg7XG59O1xuXG5jb25zdCBjaGVja1VzYWdlTGltaXQgPSAodGllcjogc3RyaW5nLCByZXNvdXJjZTogc3RyaW5nLCBjdXJyZW50Q291bnQ6IG51bWJlcik6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB0aWVyQ29uZmlnID0gU1VCU0NSSVBUSU9OX1RJRVJTW3RpZXIgYXMga2V5b2YgdHlwZW9mIFNVQlNDUklQVElPTl9USUVSU107XG4gIGlmICghdGllckNvbmZpZykgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBsaW1pdCA9IHRpZXJDb25maWcubGltaXRzW3Jlc291cmNlIGFzIGtleW9mIHR5cGVvZiB0aWVyQ29uZmlnLmxpbWl0c107XG4gIHJldHVybiBjdXJyZW50Q291bnQgPCBsaW1pdDtcbn07XG5cbmNvbnN0IGdldFVwZ3JhZGVNZXNzYWdlID0gKGN1cnJlbnRUaWVyOiBzdHJpbmcsIHJlcXVpcmVkVGllcjogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgaWYgKHJlcXVpcmVkVGllciA9PT0gJ1BMVVMnKSB7XG4gICAgcmV0dXJuICdVcGdyYWRlIHRvIFBsdXMgKCQyLjk5L21vbnRoKSB0byBhY2Nlc3MgdGhpcyBmZWF0dXJlJztcbiAgfVxuICBpZiAocmVxdWlyZWRUaWVyID09PSAnUFJFTUlVTScpIHtcbiAgICByZXR1cm4gJ1VwZ3JhZGUgdG8gUHJlbWl1bSAoJDkuOTkvbW9udGgpIHRvIGFjY2VzcyB0aGlzIGZlYXR1cmUnO1xuICB9XG4gIHJldHVybiAnUGxlYXNlIHVwZ3JhZGUgdG8gYWNjZXNzIHRoaXMgZmVhdHVyZSc7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmlwdGlvblN0YXR1cyB7XG4gIHRpZXI6ICdGUkVFJyB8ICdQTFVTJyB8ICdQUkVNSVVNJztcbiAgdGllck5hbWU6IHN0cmluZztcbiAgcHJpY2U6IG51bWJlcjtcbiAgZmVhdHVyZXM6IHN0cmluZ1tdO1xuICBsaW1pdHM6IHtcbiAgICB1c2VyczogbnVtYmVyO1xuICAgIGFjY291bnRzOiBudW1iZXI7XG4gICAgdHJhbnNhY3Rpb25zOiBudW1iZXI7XG4gICAgYnVkZ2V0czogbnVtYmVyO1xuICAgIGNhdGVnb3JpZXM6IG51bWJlcjtcbiAgfTtcbiAgaXNBY3RpdmU6IGJvb2xlYW47XG4gIHN0cmlwZVN1YnNjcmlwdGlvbj86IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHN0YXR1czogc3RyaW5nO1xuICAgIGN1cnJlbnRQZXJpb2RTdGFydDogRGF0ZTtcbiAgICBjdXJyZW50UGVyaW9kRW5kOiBEYXRlO1xuICAgIGNhbmNlbEF0UGVyaW9kRW5kOiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzZVN1YnNjcmlwdGlvblJldHVybiB7XG4gIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uU3RhdHVzIHwgbnVsbDtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcblxuICAvLyBGZWF0dXJlIGFjY2VzcyBjaGVja3NcbiAgY2FuQWNjZXNzOiAocmVxdWlyZWRUaWVyOiAnRlJFRScgfCAnUExVUycgfCAnUFJFTUlVTScpID0+IGJvb2xlYW47XG4gIGNhblVzZUZlYXR1cmU6IChmZWF0dXJlOiAnbXVsdGlVc2VyJyB8ICdvY3JSZWNlaXB0cycgfCAncHJpb3JpdHlTeW5jJyB8ICdlbmhhbmNlZEludmVzdG1lbnRzJyB8ICdiYW5rQ29ubmVjdGlvbnMnIHwgJ2ludmVzdG1lbnRTeW5jJykgPT4gYm9vbGVhbjtcblxuICAvLyBVc2FnZSBsaW1pdCBjaGVja3NcbiAgY2FuQWRkUmVzb3VyY2U6IChyZXNvdXJjZTogJ3VzZXJzJyB8ICdhY2NvdW50cycgfCAnYnVkZ2V0cycgfCAnY2F0ZWdvcmllcycsIGN1cnJlbnRDb3VudDogbnVtYmVyKSA9PiBib29sZWFuO1xuICBnZXRSZXNvdXJjZUxpbWl0OiAocmVzb3VyY2U6ICd1c2VycycgfCAnYWNjb3VudHMnIHwgJ2J1ZGdldHMnIHwgJ2NhdGVnb3JpZXMnKSA9PiBudW1iZXI7XG5cbiAgLy8gVXBncmFkZSBoZWxwZXJzXG4gIGdldFVwZ3JhZGVNZXNzYWdlOiAocmVxdWlyZWRUaWVyOiAnRlJFRScgfCAnUExVUycgfCAnUFJFTUlVTScpID0+IHN0cmluZztcbiAgbmVlZHNVcGdyYWRlOiAocmVxdWlyZWRUaWVyOiAnRlJFRScgfCAnUExVUycgfCAnUFJFTUlVTScpID0+IGJvb2xlYW47XG5cbiAgLy8gQWN0aW9uc1xuICByZWZyZXNoOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGdyYWRlOiAodGllcjogJ1BMVVMnIHwgJ1BSRU1JVU0nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBtYW5hZ2VCaWxsaW5nOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG5jb25zdCBGRUFUVVJFX1RJRVJfTUFQID0ge1xuICBtdWx0aVVzZXI6ICdQTFVTJyxcbiAgb2NyUmVjZWlwdHM6ICdQTFVTJyxcbiAgcHJpb3JpdHlTeW5jOiAnUExVUycsXG4gIGVuaGFuY2VkSW52ZXN0bWVudHM6ICdQTFVTJyxcbiAgYmFua0Nvbm5lY3Rpb25zOiAnUFJFTUlVTScsXG4gIGludmVzdG1lbnRTeW5jOiAnUFJFTUlVTScsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3Vic2NyaXB0aW9uKCk6IFVzZVN1YnNjcmlwdGlvblJldHVybiB7XG4gIGNvbnN0IHsgZGF0YTogc2Vzc2lvbiB9ID0gdXNlU2Vzc2lvbigpO1xuICBjb25zdCBbc3Vic2NyaXB0aW9uLCBzZXRTdWJzY3JpcHRpb25dID0gdXNlU3RhdGU8U3Vic2NyaXB0aW9uU3RhdHVzIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICBjb25zdCBmZXRjaFN1YnNjcmlwdGlvblN0YXR1cyA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmVtYWlsKSB7XG4gICAgICAvLyBEZWZhdWx0IHRvIGZyZWUgdGllciBmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzXG4gICAgICBzZXRTdWJzY3JpcHRpb24oe1xuICAgICAgICB0aWVyOiAnRlJFRScsXG4gICAgICAgIHRpZXJOYW1lOiAnRnJlZScsXG4gICAgICAgIHByaWNlOiAwLFxuICAgICAgICBmZWF0dXJlczogU1VCU0NSSVBUSU9OX1RJRVJTLkZSRUUuZmVhdHVyZXMsXG4gICAgICAgIGxpbWl0czogU1VCU0NSSVBUSU9OX1RJRVJTLkZSRUUubGltaXRzLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3N1YnNjcmlwdGlvbnMvc3RhdHVzJyk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgc2V0U3Vic2NyaXB0aW9uKGRhdGEpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIHN1YnNjcmlwdGlvbiBzdGF0dXM6JywgZXJyKTtcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gbG9hZCBzdWJzY3JpcHRpb24gc3RhdHVzJyk7XG5cbiAgICAgIC8vIEZhbGxiYWNrIHRvIGZyZWUgdGllclxuICAgICAgc2V0U3Vic2NyaXB0aW9uKHtcbiAgICAgICAgdGllcjogJ0ZSRUUnLFxuICAgICAgICB0aWVyTmFtZTogJ0ZyZWUnLFxuICAgICAgICBwcmljZTogMCxcbiAgICAgICAgZmVhdHVyZXM6IFNVQlNDUklQVElPTl9USUVSUy5GUkVFLmZlYXR1cmVzLFxuICAgICAgICBsaW1pdHM6IFNVQlNDUklQVElPTl9USUVSUy5GUkVFLmxpbWl0cyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaFN1YnNjcmlwdGlvblN0YXR1cygpO1xuICB9LCBbc2Vzc2lvbj8udXNlcj8uZW1haWxdKTtcblxuICBjb25zdCBjYW5BY2Nlc3MgPSAocmVxdWlyZWRUaWVyOiAnRlJFRScgfCAnUExVUycgfCAnUFJFTUlVTScpOiBib29sZWFuID0+IHtcbiAgICBpZiAoIXN1YnNjcmlwdGlvbikgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBjYW5BY2Nlc3NGZWF0dXJlKHN1YnNjcmlwdGlvbi50aWVyLCByZXF1aXJlZFRpZXIpO1xuICB9O1xuXG4gIGNvbnN0IGNhblVzZUZlYXR1cmUgPSAoZmVhdHVyZToga2V5b2YgdHlwZW9mIEZFQVRVUkVfVElFUl9NQVApOiBib29sZWFuID0+IHtcbiAgICBjb25zdCByZXF1aXJlZFRpZXIgPSBGRUFUVVJFX1RJRVJfTUFQW2ZlYXR1cmVdO1xuICAgIHJldHVybiBjYW5BY2Nlc3MocmVxdWlyZWRUaWVyKTtcbiAgfTtcblxuICBjb25zdCBjYW5BZGRSZXNvdXJjZSA9IChyZXNvdXJjZTogJ3VzZXJzJyB8ICdhY2NvdW50cycgfCAnYnVkZ2V0cycgfCAnY2F0ZWdvcmllcycsIGN1cnJlbnRDb3VudDogbnVtYmVyKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gY2hlY2tVc2FnZUxpbWl0KHN1YnNjcmlwdGlvbi50aWVyLCByZXNvdXJjZSwgY3VycmVudENvdW50KTtcbiAgfTtcblxuICBjb25zdCBnZXRSZXNvdXJjZUxpbWl0ID0gKHJlc291cmNlOiAndXNlcnMnIHwgJ2FjY291bnRzJyB8ICdidWRnZXRzJyB8ICdjYXRlZ29yaWVzJyk6IG51bWJlciA9PiB7XG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiBTVUJTQ1JJUFRJT05fVElFUlMuRlJFRS5saW1pdHNbcmVzb3VyY2VdO1xuICAgIHJldHVybiBzdWJzY3JpcHRpb24ubGltaXRzW3Jlc291cmNlXTtcbiAgfTtcblxuICBjb25zdCBuZWVkc1VwZ3JhZGUgPSAocmVxdWlyZWRUaWVyOiAnRlJFRScgfCAnUExVUycgfCAnUFJFTUlVTScpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gIWNhbkFjY2VzcyhyZXF1aXJlZFRpZXIpO1xuICB9O1xuXG4gIGNvbnN0IGdldFVwZ3JhZGVNZXNzYWdlRm9yVGllciA9IChyZXF1aXJlZFRpZXI6ICdGUkVFJyB8ICdQTFVTJyB8ICdQUkVNSVVNJyk6IHN0cmluZyA9PiB7XG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHJldHVybiAnUGxlYXNlIHNpZ24gaW4gdG8gYWNjZXNzIHRoaXMgZmVhdHVyZSc7XG4gICAgcmV0dXJuIGdldFVwZ3JhZGVNZXNzYWdlKHN1YnNjcmlwdGlvbi50aWVyLCByZXF1aXJlZFRpZXIpO1xuICB9O1xuXG4gIGNvbnN0IHVwZ3JhZGUgPSBhc3luYyAodGllcjogJ1BMVVMnIHwgJ1BSRU1JVU0nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvc3Vic2NyaXB0aW9ucy9jcmVhdGUtY2hlY2tvdXQnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aWVyIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VXJsIH0gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY2hlY2tvdXRVcmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgZGVtbyBtb2RlIGdyYWNlZnVsbHlcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgaWYgKGVycm9yRGF0YS5pc0RlbW9Nb2RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRGVtbyBtb2RlOiBTaW11bGF0aW5nIHVwZ3JhZGUgdG8nLCB0aWVyKTtcblxuICAgICAgICAgICAgLy8gU2hvdyBub3RpZmljYXRpb24gYWJvdXQgd2hhdCB3b3VsZCBub3JtYWxseSBoYXBwZW5cbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IHdpbmRvdy5jb25maXJtKFxuICAgICAgICAgICAgICBg8J+bkiBEZW1vIE1vZGUgU2ltdWxhdGlvblxcblxcbmAgK1xuICAgICAgICAgICAgICBgSW4gYSByZWFsIGVudmlyb25tZW50LCB0aGlzIHdvdWxkOlxcbmAgK1xuICAgICAgICAgICAgICBg4oCiIFJlZGlyZWN0IHlvdSB0byBTdHJpcGUgY2hlY2tvdXRcXG5gICtcbiAgICAgICAgICAgICAgYOKAoiBQcm9jZXNzIHBheW1lbnQgZm9yICR7dGllcn0gKCQke1NVQlNDUklQVElPTl9USUVSU1t0aWVyXS5wcmljZX0vbW9udGgpXFxuYCArXG4gICAgICAgICAgICAgIGDigKIgVXBkYXRlIHlvdXIgc3Vic2NyaXB0aW9uXFxuXFxuYCArXG4gICAgICAgICAgICAgIGBGb3IgdGhpcyBkZW1vLCB3ZSdsbCBzaW11bGF0ZSB0aGUgdXBncmFkZSBsb2NhbGx5LlxcblxcbmAgK1xuICAgICAgICAgICAgICBgUHJvY2VlZCB3aXRoIGRlbW8gdXBncmFkZSB0byAke3RpZXJ9P2BcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChjb25maXJtZWQpIHtcbiAgICAgICAgICAgICAgLy8gU2ltdWxhdGUgdGhlIHRpZXIgdXBncmFkZSBsb2NhbGx5XG4gICAgICAgICAgICAgIHNldFN1YnNjcmlwdGlvbih7XG4gICAgICAgICAgICAgICAgdGllcjogdGllcixcbiAgICAgICAgICAgICAgICB0aWVyTmFtZTogU1VCU0NSSVBUSU9OX1RJRVJTW3RpZXJdLm5hbWUsXG4gICAgICAgICAgICAgICAgcHJpY2U6IFNVQlNDUklQVElPTl9USUVSU1t0aWVyXS5wcmljZSxcbiAgICAgICAgICAgICAgICBmZWF0dXJlczogU1VCU0NSSVBUSU9OX1RJRVJTW3RpZXJdLmZlYXR1cmVzLFxuICAgICAgICAgICAgICAgIGxpbWl0czogU1VCU0NSSVBUSU9OX1RJRVJTW3RpZXJdLmxpbWl0cyxcbiAgICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gU2hvdyBzdWNjZXNzIG1lc3NhZ2VcbiAgICAgICAgICAgICAgYWxlcnQoYOKchSBEZW1vIHVwZ3JhZGUgc3VjY2Vzc2Z1bCFcXG5cXG5Zb3UgYXJlIG5vdyBvbiB0aGUgJHt0aWVyfSBwbGFuICgkJHtTVUJTQ1JJUFRJT05fVElFUlNbdGllcl0ucHJpY2V9L21vbnRoKS5cXG5cXG5UaGlzIGlzIGEgbG9jYWwgc2ltdWxhdGlvbiAtIG5vIGFjdHVhbCBiaWxsaW5nIG9jY3VycmVkLmApO1xuICAgICAgICAgICAgICByZXR1cm47IC8vIFN1Y2Nlc3MsIGRvbid0IHRocm93IGVycm9yXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VwZ3JhZGUgY2FuY2VsbGVkIGJ5IHVzZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5lcnJvciB8fCAnRmFpbGVkIHRvIGNyZWF0ZSBjaGVja291dCBzZXNzaW9uJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEZW1vIE1vZGU6IFN0cmlwZSBub3QgY29uZmlndXJlZC4gV291bGQgdXBncmFkZSB0byAke3RpZXJ9ICgkJHtTVUJTQ1JJUFRJT05fVElFUlNbdGllcl0ucHJpY2V9L21vbnRoKWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzdGFydGluZyB1cGdyYWRlOicsIGVycik7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG1hbmFnZUJpbGxpbmcgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvc3Vic2NyaXB0aW9ucy9jcmVhdGUtcG9ydGFsJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgeyBwb3J0YWxVcmwgfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwb3J0YWxVcmw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgZGVtbyBtb2RlIGdyYWNlZnVsbHlcbiAgICAgICAgY29uc29sZS5sb2coJ0RlbW8gbW9kZTogQmlsbGluZyBtYW5hZ2VtZW50IHJlcXVlc3RlZCcpO1xuXG4gICAgICAgIC8vIFNob3cgZGVtbyBiaWxsaW5nIG1hbmFnZW1lbnQgb3B0aW9uc1xuICAgICAgICBjb25zdCBvcHRpb25zID0gYERlbW8gQmlsbGluZyBNYW5hZ2VtZW50XFxuXFxuQXZhaWxhYmxlIG9wdGlvbnM6XFxu4oCiIERvd25ncmFkZSB0byBGcmVlIChjYW5jZWwgc3Vic2NyaXB0aW9uKVxcbuKAoiBWaWV3IGN1cnJlbnQgcGxhbiBkZXRhaWxzXFxu4oCiIFNpbXVsYXRlIHBsYW4gY2hhbmdlc2A7XG5cbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbj8udGllciAhPT0gJ0ZSRUUnKSB7XG4gICAgICAgICAgY29uc3QgY29uZmlybWVkID0gd2luZG93LmNvbmZpcm0oXG4gICAgICAgICAgICBgJHtvcHRpb25zfVxcblxcbldvdWxkIHlvdSBsaWtlIHRvIGRvd25ncmFkZSB0byB0aGUgRnJlZSBwbGFuP1xcblxcbihUaGlzIHNpbXVsYXRlcyBjYW5jZWxpbmcgeW91ciBzdWJzY3JpcHRpb24pYFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoY29uZmlybWVkKSB7XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBkb3duZ3JhZGUgdG8gZnJlZVxuICAgICAgICAgICAgc2V0U3Vic2NyaXB0aW9uKHtcbiAgICAgICAgICAgICAgdGllcjogJ0ZSRUUnLFxuICAgICAgICAgICAgICB0aWVyTmFtZTogU1VCU0NSSVBUSU9OX1RJRVJTLkZSRUUubmFtZSxcbiAgICAgICAgICAgICAgcHJpY2U6IFNVQlNDUklQVElPTl9USUVSUy5GUkVFLnByaWNlLFxuICAgICAgICAgICAgICBmZWF0dXJlczogU1VCU0NSSVBUSU9OX1RJRVJTLkZSRUUuZmVhdHVyZXMsXG4gICAgICAgICAgICAgIGxpbWl0czogU1VCU0NSSVBUSU9OX1RJRVJTLkZSRUUubGltaXRzLFxuICAgICAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhbGVydChg4pyFIERlbW8gZG93bmdyYWRlIHN1Y2Nlc3NmdWwhXFxuXFxuWW91IGFyZSBub3cgb24gdGhlIEZyZWUgcGxhbi5cXG5cXG5UaGlzIGlzIGEgbG9jYWwgc2ltdWxhdGlvbiAtIG5vIGFjdHVhbCBiaWxsaW5nIGNoYW5nZXMgb2NjdXJyZWQuYCk7XG4gICAgICAgICAgICByZXR1cm47IC8vIFN1Y2Nlc3MsIGRvbid0IHRocm93IGVycm9yXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsZXJ0KCdEZW1vIE1vZGU6IFlvdSBhcmUgYWxyZWFkeSBvbiB0aGUgRnJlZSBwbGFuLlxcblxcbkluIGEgcmVhbCBlbnZpcm9ubWVudCwgdGhpcyB3b3VsZCBvcGVuIHRoZSBTdHJpcGUgYmlsbGluZyBwb3J0YWwuJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RlbW8gTW9kZTogQmlsbGluZyBwb3J0YWwgc2ltdWxhdGlvbiBjb21wbGV0ZWQnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9wZW5pbmcgYmlsbGluZyBwb3J0YWw6JywgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVmcmVzaCA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgYXdhaXQgZmV0Y2hTdWJzY3JpcHRpb25TdGF0dXMoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHN1YnNjcmlwdGlvbixcbiAgICBpc0xvYWRpbmcsXG4gICAgZXJyb3IsXG4gICAgY2FuQWNjZXNzLFxuICAgIGNhblVzZUZlYXR1cmUsXG4gICAgY2FuQWRkUmVzb3VyY2UsXG4gICAgZ2V0UmVzb3VyY2VMaW1pdCxcbiAgICBnZXRVcGdyYWRlTWVzc2FnZTogZ2V0VXBncmFkZU1lc3NhZ2VGb3JUaWVyLFxuICAgIG5lZWRzVXBncmFkZSxcbiAgICByZWZyZXNoLFxuICAgIHVwZ3JhZGUsXG4gICAgbWFuYWdlQmlsbGluZyxcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VTZXNzaW9uIiwiU1VCU0NSSVBUSU9OX1RJRVJTIiwiRlJFRSIsIm5hbWUiLCJwcmljZSIsImZlYXR1cmVzIiwibGltaXRzIiwidXNlcnMiLCJhY2NvdW50cyIsInRyYW5zYWN0aW9ucyIsImJ1ZGdldHMiLCJjYXRlZ29yaWVzIiwiUExVUyIsIlBSRU1JVU0iLCJjYW5BY2Nlc3NGZWF0dXJlIiwiY3VycmVudFRpZXIiLCJyZXF1aXJlZFRpZXIiLCJ0aWVyT3JkZXIiLCJjdXJyZW50SW5kZXgiLCJpbmRleE9mIiwicmVxdWlyZWRJbmRleCIsImNoZWNrVXNhZ2VMaW1pdCIsInRpZXIiLCJyZXNvdXJjZSIsImN1cnJlbnRDb3VudCIsInRpZXJDb25maWciLCJsaW1pdCIsImdldFVwZ3JhZGVNZXNzYWdlIiwiRkVBVFVSRV9USUVSX01BUCIsIm11bHRpVXNlciIsIm9jclJlY2VpcHRzIiwicHJpb3JpdHlTeW5jIiwiZW5oYW5jZWRJbnZlc3RtZW50cyIsImJhbmtDb25uZWN0aW9ucyIsImludmVzdG1lbnRTeW5jIiwidXNlU3Vic2NyaXB0aW9uIiwic2Vzc2lvbiIsImRhdGEiLCJzdWJzY3JpcHRpb24iLCJzZXRTdWJzY3JpcHRpb24iLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiZmV0Y2hTdWJzY3JpcHRpb25TdGF0dXMiLCJ1c2VyIiwiZW1haWwiLCJ0aWVyTmFtZSIsImlzQWN0aXZlIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwiZXJyIiwiY29uc29sZSIsImNhbkFjY2VzcyIsImNhblVzZUZlYXR1cmUiLCJmZWF0dXJlIiwiY2FuQWRkUmVzb3VyY2UiLCJnZXRSZXNvdXJjZUxpbWl0IiwibmVlZHNVcGdyYWRlIiwiZ2V0VXBncmFkZU1lc3NhZ2VGb3JUaWVyIiwidXBncmFkZSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNoZWNrb3V0VXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZXJyb3JEYXRhIiwiaXNEZW1vTW9kZSIsImxvZyIsImNvbmZpcm1lZCIsImNvbmZpcm0iLCJhbGVydCIsInBhcnNlRXJyb3IiLCJtYW5hZ2VCaWxsaW5nIiwicG9ydGFsVXJsIiwib3B0aW9ucyIsInJlZnJlc2giXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useSubscription.ts\n"));

/***/ })

});